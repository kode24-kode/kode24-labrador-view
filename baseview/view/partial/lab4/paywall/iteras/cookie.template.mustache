<script>
(function() {
    function getCookieValue(name) {
        const cookie = document.cookie
            .split('; ')
            .find(row => row.startsWith(name + '='));
        return cookie ? cookie.split('=').slice(1).join('=') : null;
    }

    const cookieName = 'iteraspass';
    let value = getCookieValue(cookieName);

    if (!value) {
        return;
    }

    const lastSlash = value.lastIndexOf('/');
    if (lastSlash === -1) {
        return;
    }
    const payload = value.substring(0, lastSlash);

    const fields = payload.split('|');

    const [
        accessLevel,
        paywallId,
        expiryTimestamp,
        customerNumber,
        ipAddress,
        ...extraFields
    ] = fields;

    const accessLevels = (accessLevel || '').split(',');
    const paywallIds = (paywallId || '').split(',');

    if ( accessLevels.some(level => level.toLowerCase() === "sub") && typeof Dac !== "undefined" && Dac.clientData && Dac.clientData.paywall ) {
        Dac.clientData.paywall.isAuthenticated = true;
    }
})();
</script>