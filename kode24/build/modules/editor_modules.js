var e={d:(t,o)=>{for(var a in o)e.o(o,a)&&!e.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:o[a]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.d(t,{HK:()=>d,Kt:()=>s,x0:()=>o,_f:()=>i,Nx:()=>a,_P:()=>c});var o={};e.r(o),e.d(o,{demoElement:()=>l});var a={};e.r(a),e.d(a,{slack_notifier:()=>n});var i={};e.r(i),e.d(i,{DemoCollection:()=>p});class l{constructor(e){this.api=e}onRender(e,t){const o=t.get("external");o&&o.properties&&o.properties.timeseries&&o.properties.timeseries[0]&&(e.setFiltered("air_temperature",this.api.v1.util.object.get("data.instant.details.air_temperature",o.properties.timeseries[0])),e.setFiltered("wind_speed",this.api.v1.util.object.get("data.instant.details.wind_speed",o.properties.timeseries[0])),e.setFiltered("symbol_code",this.api.v1.util.object.get("data.next_1_hours.summary.symbol_code",o.properties.timeseries[0])))}onSettingsPanel(e,t,o){const a=[{location:"Oslo",lat:"59.9333",lon:"10.7166"},{location:"Stockholm",lat:"59.3345",lon:"18.0632"},{location:"Copenhagen",lat:"55.6760",lon:"12.5683"},{location:"Helsinki",lat:"60.1920",lon:"24.9458"}];return e.setFiltered("locations",a),{onSubmit:({formValues:t})=>{if(t.location){const o=a.filter((e=>e.location===t.location)).pop();e.set("fields.lat",o.lat),e.set("fields.lon",o.lon),e.set("fields.location",o.location)}}}}}const s={ArticleDemoApp:class{constructor(e,t){this.api=e,this.rootModel=t.rootModel,this.enabled=!0,this.template='<div class="lab-modal-form lab-grid lab-hidden">\n\n            <div class="lab-formgroup lab-grid lab-bordered">\n                <h2 class="lab-title lab-grid-large-12 lab-space-below-large">Article Demo App</h2>\n                <div class="lab-formgroup-item lab-grid-large-12 lab-space-below-medium">\n                    <label for="demoTextField">Demo text field</label>\n                    <input type="text" value="{{ fields.demoTextField}}" name="fields.demoTextField" id="demoTextField" placeholder="Placeholder for article demo app...">\n                </div>\n            </div>\n\n        </div>'}onAside(){return{section:"Advanced",label:"Demo App"}}onPaths(){return{"fields.demoTextField":{node:"fields.demoTextField",validator:"notEmpty"}}}onMarkup(){return this.api.v1.util.dom.renderTemplate(this.template,{fields:{demoTextField:this.rootModel.get("fields.demoTextField")}},!0)}}};class r{static notify(e){const t={text:`${e}\n(This is a demo message used by the Slack Notifier plugin)`};fetch("https://hooks.slack.com/services/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",{method:"POST",body:JSON.stringify(t)}).then((e=>{if(!e.ok)throw new Error(`Server error ${e.status}`);return e.text()})).catch((e=>{console.log(e)}))}}const n={name:"Slack Notifier",description:"Send a message to a Slack when a page is published or send a message manually.",version:"1.0.0",isEnabled:!0,elements:{row:{properties:{contentMenus:{slackMenu:{position:"right",snapToTop:!0,style:{"margin-top":"50px","margin-right":"-50px"},items:{slack:{icon:"my_icons-slack",title:"Send message to Slack",displayCondition:"hasParentOfTypes",params:{modelTypes:["dropZone"]},callback:(e,t)=>{const o=e.getModel(),a=lab_api.v1.model.query.getRootModel(),i=`${lab_api.v1.properties.get("customer_cms_url")}/edit/${a.getType().replace("page_","")}/id/${a.getId()}`;lab_api.v1.ui.modal.dialog({content:{title:"Notify on Slack",formgroups:[{hasGrid:!0,elements:[{grid:12,id:"text_area",label:"Write a message to send to Slack",tag:"textarea",attributes:[{name:"id",value:"text_area"},{name:"name",value:"text_area"}],value:`Please have a look at row ${o.getModelIndex()+1} at this page:\n${i}`}]}]},footer:{informalText:"This functionality is for demo purposes only",buttons:[{type:"submit",value:"Send",highlight:!0}]},callbacks:{submit:e=>{r.notify(e.text_area)}}})}}}}}}}},entry:class{onReady(e){this.api=e,this.api.v1.util.dom.addFile("css","/view-resources/custom-starter-view/modules/plugins/slack_notifier/slack_notifier.css"),this.api.v1.app.on("published",(e=>{r.notify(`Page ${e.id} is published\nFront: ${e.url}\nEditor: ${lab_api.v1.properties.get("customer_cms_url")}/edit/${e.type}/id/${e.id}`)}))}}},d=class{onReady(e){this.api=e,e.v1.app.on("published",this.onPublished)}onPublished(e){}},p=class{constructor(e){this.api=e}onGetData(e){return[{location:"Oslo",lat:"59.9333",lon:"10.7166"},{location:"Bergen",lat:"60.3894",lon:"5.33"},{location:"Trondheim",lat:"63.4308",lon:"10.4034"},{location:"Tromsø",lat:"69.6827",lon:"18.9427"},{location:"Vardø",lat:"70.3705",lon:"31.0241"}]}onMapData(e,t){const o=[];return t.forEach((e=>{o.push({type:"demoElement",contentdata:{fields:{location:e.location,lat:e.lat,lon:e.lon}}})})),o}onItemProperties(e){return{title:{path:"fields.location"}}}},c={};var m=t.HK,u=t.Kt,h=t.x0,b=t._f,g=t.Nx,f=t._P;export{m as Entry,u as appsModules,h as behaviours,b as collections,g as plugins,f as site};
//# sourceMappingURL=editor_modules.js.map